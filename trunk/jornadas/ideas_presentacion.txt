Temas para la presentacion:
===========================


- Intro: Necesidad

	* servicios accesibles desde afuera, pero no públicos.
    * ej: SSH, cpanels webs.
    * experiencia: log spam => disk full [& brokers example: 50MB semanales].
    * experiencia: previa con iptables


- Que es:

	* sistema "sigiloso" que utiliza la
	  comunicacion a través de puertos cerrados para autorizar el uso de servicios.
	* no hay rpta (sigiloso).
	* secreto compartido (secuencia de puertos knockeados).
    * Mostar tipico grafico de secuencia.


- Que Resuelve:

	* evita ataques por fuerza bruta
	* evita log spam
	* ¡evita vulnerabilidades del servicio!
    

- Nuestra Solucion:

    * extension de netfilter + iptables.
    * aclarar que es netfilter e iptables (rol de cada uno).
    * que tareas se hacen en userspace y en kernelspace (flujo desde setear la regla hasta llegar al kernel).
    
    
- Escenario 1:

	* TCP
	* Secuencia de "knocks"
	* secreto compartido.
	* peers, rules.
	* ejemplo de iptables en una sola regla (con las posibles opciones).
    * statefull
	* netfilter


- Cuestiones del Escenario 1:

	* sniffing => replay


- Escenario 2:

	* necesidad de anti-replay
	* autenticamos con el payload en un solo msj UDP
	* payload: hmac(ipsrc + secreto)
	* no pueden hacer replay desde otra ipsrc


- Cuestiones del Escenario 2:

	* ARP spoof -> MitM ?: roban nuestra identidad (ipsrc)
	* solucion: hmac(ipsrc + secreto + epoch_min)
	* validez de un solo minuto
	* no acepto repeticion dentro de ese minuto


- Portknocking no es una solución a:

	* Man in the Middle
	* integridad y confidencialidad de la comunicación
	* VPN ...


- Utilidad del userspace message.

	* Arquitectura de otras implementaciones de port knocking
	* Nuestra arquitectura
	* mensajes kernelspace -> userspace


- Anecdotas de programación.

	* iptables
	* netfilter
	* garbage collector
	* hash tables
	* mini-framework para testing


- Conclusion

	* ...
	* destino: netfilter repository
	* help from comunidad mendocina? beta testers?
